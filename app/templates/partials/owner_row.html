<tr class="hover:bg-gray-50">
    <td class="px-2 py-1.5">
        <div class="overflow-hidden" style="text-overflow:ellipsis;white-space:nowrap">
            <a href="/vlastnici/{{ owner.id }}?back={{ (list_url or '/vlastnici')|urlencode }}" class="font-medium text-blue-600 hover:text-blue-800 hover:underline" title="{{ owner.display_name }}">{{ owner.display_name }}</a>
        </div>
        {% if owner.birth_number %}
        <div class="text-gray-400" style="font-size:10px">RČ: {{ owner.birth_number }}</div>
        {% elif owner.company_id %}
        <div class="text-gray-400" style="font-size:10px">IČ: {{ owner.company_id }}</div>
        {% endif %}
    </td>
    <td class="px-2 py-1.5">
        {% if owner.owner_type.value == 'legal' %}
        <span class="px-1.5 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">Právnická</span>
        {% else %}
        <span class="px-1.5 py-0.5 text-xs font-medium bg-gray-100 text-gray-800 rounded-full">Fyzická</span>
        {% endif %}
    </td>
    <td class="px-2 py-1.5 text-gray-700 font-mono">
        {% for ou in owner.units %}<a href="/jednotky/{{ ou.unit.id }}?back={{ (list_url or '/vlastnici')|urlencode }}" class="text-blue-600 hover:text-blue-800 hover:underline">{{ ou.unit.unit_number }}</a>{% if not loop.last %}, {% endif %}{% endfor %}
    </td>
    <td class="px-2 py-1.5 text-gray-500 text-center">
        {% set sections = [] %}
        {% for ou in owner.units %}
            {% if ou.unit.section and ou.unit.section not in sections %}
                {% if sections.append(ou.unit.section) %}{% endif %}
            {% endif %}
        {% endfor %}
        {{ sections|join(", ") or '—' }}
    </td>
    <td class="px-2 py-1.5 text-gray-700 overflow-hidden" style="text-overflow:ellipsis;white-space:nowrap" title="{{ owner.email or '' }}{% if owner.email_secondary and owner.email_secondary != owner.email %} / {{ owner.email_secondary }}{% endif %}">
        {% if owner.email %}{{ owner.email }}{% else %}<span class="text-gray-300">—</span>{% endif %}
    </td>
    <td class="px-2 py-1.5 text-gray-700">
        {% if owner.phone %}{{ owner.phone }}{% else %}<span class="text-gray-300">—</span>{% endif %}
    </td>
    <td class="px-2 py-1.5 text-gray-700 text-right font-mono">
        {% set total_votes = owner.units | map(attribute='votes') | sum %}
        {{ "{:,}".format(total_votes).replace(",", " ") }}
    </td>
</tr>
