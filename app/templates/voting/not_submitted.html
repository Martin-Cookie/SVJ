{% extends "base.html" %}
{% block title %}{{ voting.title }} - SVJ Správa{% endblock %}

{% block content %}
<div class="flex flex-col" style="height:calc(100vh - 3rem)">
<div class="shrink-0">
{% include "voting/_voting_header.html" %}

<!-- Search -->
<div class="mb-4">
    <input type="text" name="q" value="{{ q }}" placeholder="Hledat vlastníka..."
           hx-get="/hlasovani/{{ voting.id }}/neodevzdane"
           hx-trigger="keyup changed delay:300ms"
           hx-target="#neodevzdane-body"
           hx-push-url="true"
           class="w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
</div>
</div>

<div class="flex-1 overflow-y-auto min-h-0">
{% if missing %}
<div class="bg-white rounded-lg shadow overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50 sticky top-0 z-10">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Vlastník</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Jednotky</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Email</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Hlasy</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Stav</th>
            </tr>
        </thead>
        <tbody id="neodevzdane-body" class="divide-y divide-gray-200">
            {% include "voting/not_submitted_table.html" %}
        </tbody>
    </table>
</div>
<div class="mt-4 text-sm text-gray-500">
    Celkem neodevzdáno: {{ missing|length }} lístků
</div>
{% else %}
<div class="bg-white rounded-lg shadow p-8 text-center text-gray-500">
    {% if q %}Žádní vlastníci neodpovídají hledání „{{ q }}".{% else %}Všechny lístky byly zpracovány.{% endif %}
</div>
{% endif %}
</div>
</div>
{% endblock %}
